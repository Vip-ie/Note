#### 关联查询

##### 内连接【inner\|cross】join

无条件内连接：（又名交叉连接/笛卡尔连接，第一张表中的每一项会和另一张表的每一项一次组合）

```
mysql> select * from student,tanzhou;
+------+-----------+-------+-------+---------+
| s_id | s_name    | ts_id | tz_id | tz_name |
+------+-----------+-------+-------+---------+
|    1 | 三花      |     3 |     1 | 软件    |
|    1 | 三花      |     3 |     2 | 语言    |
|    1 | 三花      |     3 |     3 | 营销    |
|    1 | 三花      |     3 |     4 | 其他    |
|    2 | 玲玲      |     2 |     1 | 软件    |
|    2 | 玲玲      |     2 |     2 | 语言    |
|    2 | 玲玲      |     2 |     3 | 营销    |
|    2 | 玲玲      |     2 |     4 | 其他    |
+------+-----------+-------+-------+---------+
8 rows in set (0.00 sec)
```

有条件内连接：（在无条件的内连接基础上，加上一个**ON**句子当连接的时候，筛选出那些有实际意义的记录行来进行拼接

```
mysql> select * from student ineer join tanzhou 
    -> on ts_id=tz_id;
+------+-----------+-------+-------+---------+
| s_id | s_name    | ts_id | tz_id | tz_name |
+------+-----------+-------+-------+---------+
|    4 | 班长      |     1 |     1 | 软件    |
|    5 | lucky     |     1 |     1 | 软件    |
|    7 | jiangeng  |     1 |     1 | 软件    |
|    2 | 玲玲      |     2 |     2 | 语言    |
|    9 | 张力凯    |     2 |     2 | 语言    |
|    1 | 三花      |     3 |     3 | 营销    |
|    8 | 三花花    |     3 |     3 | 营销    |
|    3 | 林林      |     4 |     4 | 其他    |
|    6 | 王为      |     4 |     4 | 其他    |
+------+-----------+-------+-------+---------+

筛选方法
mysql> select s_name 姓名,tz_name 学院 from student inner join tanzhou on ts_id=tz_id;
+-----------+--------+
| 姓名      | 学院   |
+-----------+--------+
| 班长      | 软件   |
| lucky     | 软件   |
| jiangeng  | 软件   |
| 玲玲      | 语言   |
| 张力凯    | 语言   |
| 三花      | 营销   |
| 三花花    | 营销   |
| 林林      | 其他   |
| 王为      | 其他   |
+-----------+--------+
9 rows in set (0.00 sec)
```

##### 外连接{left\|rigth}join

左外连接 left join

左外连接：（以左表为基准）

两张表做连接的时候，在连接条件不匹配的时候留下左表中的数据，而右表的数据以null填充

例:使用左连接把学生的数据全取出，该学生没有学院信息的用null填充

```
mysql> select * from student left join tanzhou on ts_id=tz_id;
+------+-----------+-------+-------+---------+
| s_id | s_name    | ts_id | tz_id | tz_name |
+------+-----------+-------+-------+---------+
|    1 | 三花      |     3 |     3 | 营销    |
|    2 | 玲玲      |     2 |     2 | 语言    |
|    3 | 林林      |     4 |     4 | 其他    |
|    4 | 班长      |     1 |     1 | 软件    |
|    5 | lucky     |     1 |     1 | 软件    |
|    6 | 王为      |     4 |     4 | 其他    |
|    7 | jiangeng  |     1 |     1 | 软件    |
|    8 | 三花花    |     3 |     3 | 营销    |
|    9 | 张力凯    |     2 |     2 | 语言    |
+------+-----------+-------+-------+---------+
9 rows in set (0.00 sec)

mysql> select * from student right join tanzhou on ts_id=tz_id;
+------+-----------+-------+-------+---------+
| s_id | s_name    | ts_id | tz_id | tz_name |
+------+-----------+-------+-------+---------+
|    4 | 班长      |     1 |     1 | 软件    |
|    5 | lucky     |     1 |     1 | 软件    |
|    7 | jiangeng  |     1 |     1 | 软件    |
|    2 | 玲玲      |     2 |     2 | 语言    |
|    9 | 张力凯    |     2 |     2 | 语言    |
|    1 | 三花      |     3 |     3 | 营销    |
|    8 | 三花花    |     3 |     3 | 营销    |
|    3 | 林林      |     4 |     4 | 其他    |
|    6 | 王为      |     4 |     4 | 其他    |
| NULL | NULL      |  NULL |     5 | 设计    |
+------+-----------+-------+-------+---------+
10 rows in set (0.00 sec)
```

右外连接 right join

右外连接:（以右表为基准）

对两张表做连接的时候，在连接条件不匹配的时候留下右表中的数据，而左表中的数据以null填充。

例:使用右表外连接，把没有的学院的数据也显示出来。

```
mysql> select * from student right join tanzhou on ts_id=tz_id;
+------+-----------+-------+-------+---------+
| s_id | s_name    | ts_id | tz_id | tz_name |
+------+-----------+-------+-------+---------+
|    4 | 班长      |     1 |     1 | 软件    |
|    5 | lucky     |     1 |     1 | 软件    |
|    7 | jiangeng  |     1 |     1 | 软件    |
|    2 | 玲玲      |     2 |     2 | 语言    |
|    9 | 张力凯    |     2 |     2 | 语言    |
|    1 | 三花      |     3 |     3 | 营销    |
|    8 | 三花花    |     3 |     3 | 营销    |
|    3 | 林林      |     4 |     4 | 其他    |
|    6 | 王为      |     4 |     4 | 其他    |
| NULL | NULL      |  NULL |     5 | 设计    |
+------+-----------+-------+-------+---------+
10 rows in set (0.00 sec)
```

多表查询

例：查学生的ID 姓名 学院名 报学科名

```
mysql> select * from student 
    ->left join tanzhou on ts_id=tz_id 
    ->left join course on tz_id=tzc_id 
    ->left join choose on cc_id=c_id;
+------+--------+-------+-------+---------+------+---------+--------+-------+-------+
| s_id | s_name | ts_id | tz_id | tz_name | c_id | c_name  | tzc_id | sc_id | cc_id |
+------+--------+-------+-------+---------+------+---------+--------+-------+-------+
|    1 | zlk    |     1 |     1 | 软件    |    1 | python  |      1 |     1 |     1 |
|    1 | zlk    |     1 |     1 | 软件    |    2 | java    |      1 |     1 |     2 |
|    2 | lezlk  |     2 |     2 | 语言    |    3 | english |      2 |     2 |     3 |
|    3 | rave   |     3 |     3 | 营销    |    4 | seo     |      3 |     3 |     4 |
|    4 | rac    |     5 |     5 | 其他    |    5 | 其他    |      5 |  NULL |  NULL |
|    5 | hzip   |     4 |     4 | 设计    | NULL | NULL    |   NULL |  NULL |  NULL |
+------+--------+-------+-------+---------+------+---------+--------+-------+-------+
6 rows in set (0.00 sec)

筛选出最终结果
mysql> select s_name as 姓名,tz_name as 学院,c_name as 课程 from student 
    ->left join tanzhou on ts_id=tz_id 
    ->left join course on tz_id=tzc_id 
    ->left join choose on cc_id=c_id;
+--------+--------+---------+
| 姓名   | 学院   | 课程    |
+--------+--------+---------+
| zlk    | 软件   | python  |
| zlk    | 软件   | java    |
| lezlk  | 语言   | english |
| rave   | 营销   | seo     |
| rac    | 其他   | 其他    |
| hzip   | 设计   | NULL    |
+--------+--------+---------+
6 rows in set (0.00 sec)
```



